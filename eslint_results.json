[{"filePath":"/home/runner/work/llm-as-a-judge-sample/llm-as-a-judge-sample/bin/llm-as-a-judge-sample.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/runner/work/llm-as-a-judge-sample/llm-as-a-judge-sample/eslint.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/runner/work/llm-as-a-judge-sample/llm-as-a-judge-sample/lambda/orderProcessor.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'crypto' is defined but never used.","line":4,"column":13,"messageId":"unusedVar","endLine":4,"endColumn":19,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"crypto"},"fix":{"range":[49,84],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":12,"column":11,"messageId":"unexpectedAny","endLine":12,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[330,333],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[330,333],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":12,"column":34,"messageId":"unexpectedAny","endLine":12,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[353,356],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[353,356],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":12,"column":60,"messageId":"unexpectedAny","endLine":12,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[379,382],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[379,382],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":13,"column":18,"messageId":"unexpectedAny","endLine":13,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[410,413],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[410,413],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":13,"column":45,"messageId":"unexpectedAny","endLine":13,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[437,440],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[437,440],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":16,"column":38,"messageId":"unexpectedAny","endLine":16,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[511,514],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[511,514],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-var","severity":2,"message":"Unexpected var, use let or const instead.","line":21,"column":5,"messageId":"unexpectedVar","endLine":21,"endColumn":32,"fix":{"range":[633,636],"text":"let"}},{"ruleId":"no-var","severity":2,"message":"Unexpected var, use let or const instead.","line":22,"column":5,"messageId":"unexpectedVar","endLine":22,"endColumn":30,"fix":{"range":[666,669],"text":"let"}},{"ruleId":"no-var","severity":2,"message":"Unexpected var, use let or const instead.","line":23,"column":5,"messageId":"unexpectedVar","endLine":23,"endColumn":28,"fix":{"range":[697,700],"text":"let"}},{"ruleId":"no-var","severity":2,"message":"Unexpected var, use let or const instead.","line":24,"column":5,"messageId":"unexpectedVar","endLine":24,"endColumn":22,"fix":{"range":[726,729],"text":"let"}},{"ruleId":"no-var","severity":2,"message":"Unexpected var, use let or const instead.","line":31,"column":21,"messageId":"unexpectedVar","endLine":31,"endColumn":35,"fix":{"range":[905,908],"text":"let"}},{"ruleId":"no-var","severity":2,"message":"Unexpected var, use let or const instead.","line":32,"column":26,"messageId":"unexpectedVar","endLine":32,"endColumn":35,"fix":{"range":[946,949],"text":"let"}},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'processedAt' is assigned a value but never used.","line":77,"column":27,"messageId":"unusedVar","endLine":77,"endColumn":38},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'processRefund' is defined but never used.","line":93,"column":16,"messageId":"unusedVar","endLine":93,"endColumn":29},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":93,"column":39,"messageId":"unexpectedAny","endLine":93,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3095,3098],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3095,3098],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":93,"column":52,"messageId":"unexpectedAny","endLine":93,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3108,3111],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3108,3111],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":93,"column":65,"messageId":"unexpectedAny","endLine":93,"endColumn":68,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3121,3124],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3121,3124],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":15,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":6,"fixableWarningCount":0,"source":"// 注文処理Lambda\r\n\r\n// 未使用インポート（knip/ESLintで検出される）\r\nimport * as crypto from 'crypto';\r\n\r\n// ハードコードされた設定値（環境変数を使うべき）\r\nconst ORDERS_TABLE = 'orders-table-prod';\r\nconst HISTORY_TABLE = 'order-history-prod';\r\nconst SNS_TOPIC = 'arn:aws:sns:ap-northeast-1:123456789012:order-notifications';\r\n\r\n// anyを使ったダミークライアント（実際はSDKを使うべき）\r\nconst db: any = { put: async (p: any) => p, get: async (p: any) => p };\r\nconst snsClient: any = { publish: async (p: any) => p };\r\n\r\n// 戻り値の型なし・引数にany使用\r\nexport const handler = async (event: any) => {\r\n    // try/catchなし・バリデーションなし\r\n    const body = JSON.parse(event.body);\r\n\r\n    // varの使用（constまたはletを使うべき）\r\n    var orderId = body.orderId;\r\n    var userId = body.userId;\r\n    var items = body.items;\r\n    var discount = 0;\r\n\r\n    // 深いネスト（早期リターンで解消すべき）\r\n    if (items) {\r\n        if (items.length > 0) {\r\n            if (userId) {\r\n                if (orderId) {\r\n                    var total = 0;\r\n                    for (var i = 0; i < items.length; i++) {\r\n                        if (items[i].price && items[i].quantity) {\r\n                            total += items[i].price * items[i].quantity;\r\n                        }\r\n                    }\r\n\r\n                    // マジックナンバー（名前付き定数にすべき）\r\n                    if (total > 1000) {\r\n                        discount = total * 0.1;\r\n                    }\r\n                    const finalTotal = total - discount;\r\n\r\n                    // awaitなし（Promiseを握りつぶしている）\r\n                    db.put({\r\n                        TableName: ORDERS_TABLE,\r\n                        Item: {\r\n                            orderId,\r\n                            userId,\r\n                            total: finalTotal,\r\n                            status: 'PENDING',\r\n                            createdAt: new Date().toISOString(),\r\n                        },\r\n                    });\r\n\r\n                    // DRY違反：同じput処理を別テーブルにコピペ\r\n                    db.put({\r\n                        TableName: HISTORY_TABLE,\r\n                        Item: {\r\n                            orderId,\r\n                            userId,\r\n                            total: finalTotal,\r\n                            status: 'PENDING',\r\n                            createdAt: new Date().toISOString(),\r\n                        },\r\n                    });\r\n\r\n                    // awaitなし\r\n                    snsClient.publish({\r\n                        TopicArn: SNS_TOPIC,\r\n                        Message:\r\n                            '注文受付: ' + orderId + ' 合計: ' + finalTotal,\r\n                        Subject: 'New Order',\r\n                    });\r\n\r\n                    // 使われない変数\r\n                    const processedAt = new Date().toISOString();\r\n\r\n                    return {\r\n                        statusCode: 200,\r\n                        body: JSON.stringify({ ok: true }),\r\n                    };\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    // 不明瞭なエラーレスポンス\r\n    return { statusCode: 400, body: JSON.stringify({ error: 'Invalid' }) };\r\n};\r\n\r\n// 50行超の関数（CLAUDE.md違反）・anyの多用・深いネスト\r\nasync function processRefund(orderId: any, userId: any, amount: any) {\r\n    if (orderId) {\r\n        if (userId) {\r\n            if (amount > 0) {\r\n                const existing = await db.get({\r\n                    TableName: ORDERS_TABLE,\r\n                    Key: { orderId },\r\n                });\r\n                if (existing) {\r\n                    if (existing.status === 'COMPLETED') {\r\n                        // DRY違反：handler内のput処理と同じパターンを繰り返している\r\n                        await db.put({\r\n                            TableName: ORDERS_TABLE,\r\n                            Item: {\r\n                                ...existing,\r\n                                status: 'REFUNDED',\r\n                                refundAmount: amount,\r\n                                updatedAt: new Date().toISOString(),\r\n                            },\r\n                        });\r\n                        await db.put({\r\n                            TableName: HISTORY_TABLE,\r\n                            Item: {\r\n                                ...existing,\r\n                                status: 'REFUNDED',\r\n                                refundAmount: amount,\r\n                                updatedAt: new Date().toISOString(),\r\n                            },\r\n                        });\r\n\r\n                        await snsClient.publish({\r\n                            TopicArn: SNS_TOPIC,\r\n                            Message:\r\n                                'Refund processed: ' +\r\n                                orderId +\r\n                                ' amount: ' +\r\n                                amount,\r\n                        });\r\n\r\n                        return { success: true };\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return { success: false };\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"/home/runner/work/llm-as-a-judge-sample/llm-as-a-judge-sample/lib/llm-as-a-judge-sample-stack.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ordersTable' is assigned a value but never used.","line":12,"column":11,"messageId":"unusedVar","endLine":12,"endColumn":22}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as cdk from 'aws-cdk-lib/core';\nimport * as lambda from 'aws-cdk-lib/aws-lambda';\nimport * as iam from 'aws-cdk-lib/aws-iam';\nimport * as dynamodb from 'aws-cdk-lib/aws-dynamodb';\nimport { Construct } from 'constructs';\n\nexport class LlmAsAJudgeSampleStack extends cdk.Stack {\n  constructor(scope: Construct, id: string, props?: cdk.StackProps) {\n    super(scope, id, props);\n\n    // 削除ポリシーなし・ポイントインタイムリカバリなし・暗号化なし\n    const ordersTable = new dynamodb.Table(this, 'OrdersTable', {\n      tableName: 'orders-table-prod',\n      partitionKey: {\n        name: 'orderId',\n        type: dynamodb.AttributeType.STRING,\n      },\n    });\n\n    // テーブル名をそのまま文字列でハードコード（ordersTable.tableNameを使うべき）\n    const orderProcessor = new lambda.Function(this, 'OrderProcessor', {\n      runtime: lambda.Runtime.NODEJS_22_X,\n      code: lambda.Code.fromAsset('lambda'),\n      handler: 'orderProcessor.handler',\n      // マジックナンバー（cdk.Duration.seconds(30)のような意図が伝わる書き方にすべき）\n      timeout: cdk.Duration.seconds(300),\n      environment: {\n        ORDERS_TABLE: 'orders-table-prod',\n        HISTORY_TABLE: 'order-history-prod',\n        // ハードコードされたARN（SNS Topicのリソースを参照すべき）\n        SNS_TOPIC: 'arn:aws:sns:ap-northeast-1:123456789012:order-notifications',\n        // ハードコードされた環境名（パラメータや設定から取得すべき）\n        ENV: 'prod',\n      },\n    });\n\n    // 過剰なIAMパーミッション（最小権限の原則に違反）\n    orderProcessor.addToRolePolicy(new iam.PolicyStatement({\n      effect: iam.Effect.ALLOW,\n      actions: ['*'],\n      resources: ['*'],\n    }));\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/runner/work/llm-as-a-judge-sample/llm-as-a-judge-sample/test/llm-as-a-judge-sample.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]